# Packer - Actionable TODOs

Short-term (highest priority):
- Define extraction policy (flatten vs keep structure) and add CLI flags (`--flatten` / `--keep-structure`).
- Implement and test detection of `ComicInfo.xml` with cases: missing, multiple, case-insensitive, and malformed.
- Implement secure extraction (prevent path traversal attacks).
- Rework concurrency model: main thread parses chapters and dispatches per-chapter tasks to workers; ensure per-chapter atomic operations to avoid I/O races.
- Add `--skip-missing` / `--continue-on-error` flags to control behavior on missing/duplicate chapters.
- Add unit tests for filename parsing, `--chapter-range` parsing, and `ComicInfo.xml` detection.
- Add edge-case tests: extras-without-main, multi-number filenames, WARN alias for `--loglevel` (done)
- Add tests & docs for batch-file (`--batch-file`) and per-path `packer.json` config discovery (done)


Medium-term:
- Add integration tests (dry-run and real extraction) including concurrency tests.
- Standardize exit codes and improve error messages.

Long-term / Nice to have:
- Merge volume-level `ComicInfo.xml` or create a consolidated one.
- Better logging / progress reporting UI.
- Support for additional archive formats and chapter identifiers (A..Z, 0, etc.).
